<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Birthday Page</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Nunito&display=swap" rel="stylesheet" />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
  />
  <style>
    body {
      font-family: 'Nunito', sans-serif;
      background-color: #f687b3; /* pink-400 */
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      position: relative;
    }
    header {
      background-color: #7c8cf5; /* blue-400 */
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.75rem 1rem;
    }
    header img {
      width: 40px;
      height: 40px;
      border-radius: 9999px;
      object-fit: cover;
    }
    header button {
      color: white;
      font-size: 1.5rem;
      background: none;
      border: none;
      cursor: pointer;
    }
    main {
      padding: 2.5rem 1.5rem 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      flex-grow: 1;
    }
    .birthday-text, .footer-text, .photo-date {
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      border-right: 3px solid transparent;
      display: inline-block;
      max-width: 100%;
      box-sizing: border-box;
    }
    .birthday-text {
      color: white;
      font-size: 0.875rem;
      letter-spacing: 0.2em;
      margin-bottom: 0.25rem;
    }
    h1 {
      color: white;
      font-size: 2rem;
      text-align: center;
      line-height: 1.2;
      margin-bottom: 1.5rem;
      font-weight: 700;
      white-space: nowrap;
      overflow: hidden;
      border-right: 3px solid transparent;
      display: inline-block;
      max-width: 100%;
      box-sizing: border-box;
    }
    .photo-card {
      background: white;
      padding: 1rem;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1), 0 1px 3px rgba(0,0,0,0.06);
      margin-bottom: 1.5rem;
      max-width: 20rem;
      width: 100%;
      text-align: center;
      border-radius: 0.5rem;
    }
    .photo-card img {
      width: 100%;
      height: auto;
      border-radius: 0.25rem;
      object-fit: cover;
    }
    .photo-date {
      color: #f687b3; /* pink-400 */
      margin-top: 0.75rem;
      font-size: 1.125rem;
    }
    #showCardBtn {
      background-color: #7c8cf5; /* blue-400 */
      color: white;
      font-weight: 700;
      border-radius: 0.5rem;
      width: 100%;
      max-width: 20rem;
      padding: 0.75rem 0;
      font-size: 1.125rem;
      cursor: pointer;
      border: none;
      transition: background-color 0.3s ease;
      white-space: nowrap;
      overflow: hidden;
      border-right: 3px solid transparent;
      display: inline-block;
      box-sizing: border-box;
      text-align: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }
    #showCardBtn.visible {
      opacity: 1;
      pointer-events: auto;
    }
    #showCardBtn:hover {
      background-color: #5a6edc; /* darker blue */
    }
    footer {
      color: white;
      text-align: center;
      font-size: 0.75rem;
      border-top: 1px solid rgba(255,255,255,0.5);
      padding: 0.5rem 0;
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      border-right: 3px solid transparent;
      display: inline-block;
      box-sizing: border-box;
    }
    /* Popup styles */
    #popupCard {
      position: fixed;
      inset: 0;
      background-color: rgba(0,0,0,0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }
    #popupCard.show {
      display: flex;
    }
    #popupCard > div {
      background: white;
      border-radius: 0.75rem;
      box-shadow: 0 10px 25px rgba(0,0,0,0.2);
      padding: 2rem 2.5rem;
      max-width: 22rem;
      width: 100%;
      text-align: center;
      font-family: 'Nunito', sans-serif;
      font-size: 1.5rem;
      font-weight: 700;
      color: #ec4899; /* pink-500 */
      position: relative;
      overflow: visible;
      white-space: normal;
      border-right: none;
      display: block;
      box-sizing: border-box;
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1), transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }
    #popupCard.show > div {
      opacity: 1;
      transform: translateY(0);
    }
    #popupCard > div p {
      color: #4b5563; /* gray-700 */
      font-weight: 600;
      font-size: 1rem;
      margin: 1.5rem 0 2rem;
      white-space: normal;
      overflow-wrap: break-word;
      border-radius: 0.5rem;
      background: #fff0f6;
      box-shadow: 0 4px 8px rgba(236, 72, 153, 0.3);
      padding: 1rem 1.5rem;
      position: relative;
      display: block;
      border-right: none;
      overflow: visible;
    }
    #popupCard > div p::before,
    #popupCard > div p::after {
      color: #ec4899;
      font-size: 3rem;
      position: absolute;
      font-weight: 900;
      font-family: serif;
      user-select: none;
      line-height: 1;
      opacity: 0;
      transition: opacity 0.3s ease;
      pointer-events: none;
      z-index: 1;
    }
    #popupCard > div p::before {
      content: '“';
      left: 0.3rem;
      top: 0.2rem;
      transform: translate(-50%, -50%);
    }
    #popupCard > div p::after {
      content: '”';
      right: 0.3rem;
      bottom: 0.2rem;
      top: auto;
      transform: translate(50%, 50%);
    }
    #popupCard > div p.quotes-visible::before,
    #popupCard > div p.quotes-visible::after {
      opacity: 1;
    }
    #popupCard > div button {
      background-color: #3b82f6; /* blue-500 */
      color: white;
      font-weight: 700;
      border-radius: 0.5rem;
      padding: 0.75rem 2rem;
      border: none;
      cursor: pointer;
      font-size: 1.125rem;
      transition: background-color 0.3s ease;
      white-space: nowrap;
      overflow: hidden;
      border-right: 3px solid transparent;
      display: inline-block;
      box-sizing: border-box;
      text-align: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }
    #popupCard > div button.visible {
      opacity: 1;
      pointer-events: auto;
    }
    #popupCard > div button:hover {
      background-color: #2563eb; /* blue-600 */
    }
    /* Pink ribbon image decoration */
    #popupCard > div .ribbon-img {
      position: absolute;
      top: 0;
      left: 0;
      width: 70px;
      height: 70px;
      z-index: 10;
      pointer-events: none;
      user-select: none;
      transform: rotate(-45deg);
      transform-origin: top left;
    }
  </style>
</head>
<body>
  <header>
    <img
      src="https://storage.googleapis.com/a1aa/image/1ca99508-0736-4455-c7ae-8bf7b9b81de0.jpg"
      alt="Profile picture of a woman wearing a beige hijab and pink outfit, smiling"
      width="40"
      height="40"
    />
    <button aria-label="Menu" id="menuBtn">
      <i class="fas fa-bars"></i>
    </button>
  </header>

  <main>
    <p class="birthday-text" id="birthdayText"></p>
    <h1 id="birthdayName"></h1>
    <div class="photo-card">
      <img
        src="https://storage.googleapis.com/a1aa/image/e36e8ced-0cb8-4ef5-cd2e-f4eef86cd292.jpg"
        alt="Collage of 4 photos of a woman wearing a beige hijab and pink outfit smiling, arranged in a 2x2 grid"
        width="300"
        height="300"
      />
      <p class="photo-date" id="photoDate"></p>
    </div>
    <button id="showCardBtn" aria-expanded="false"></button>
  </main>

  <footer id="footerText"></footer>

  <div id="popupCard" role="alert" aria-live="polite" aria-modal="true" tabindex="-1">
    <div>
      <img src="https://i.ibb.co/3vQZqZP/pink-ribbon.png" alt="Pink ribbon decoration" class="ribbon-img" />
      <span id="popupTitle"></span>
      <p id="popupContent"></p>
      <button id="okBtn" type="button">oke!</button>
    </div>
  </div>

  <audio id="birthdayAudio" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_3a7a7a3a3a.mp3?filename=happy-birthday-11254.mp3" preload="auto"></audio>

  <script>
    // Typing animation helper
    function typeText(element, text, delay = 80) {
      element.textContent = "";
      element.style.borderRight = "3px solid #ec4899";
      let i = 0;
      return new Promise((resolve) => {
        const interval = setInterval(() => {
          element.textContent += text.charAt(i);
          i++;
          if (i === text.length) {
            clearInterval(interval);
            element.style.borderRight = "none";
            resolve();
          }
        }, delay);
      });
    }

    // Fade up animation using JS
    function fadeUp(element, duration = 500, distance = 30) {
      element.style.opacity = 0;
      element.style.transform = `translateY(${distance}px)`;
      element.style.transition = `opacity ${duration}ms ease, transform ${duration}ms ease`;
      requestAnimationFrame(() => {
        element.style.opacity = 1;
        element.style.transform = 'translateY(0)';
      });
    }

    const birthdayTextEl = document.getElementById('birthdayText');
    const birthdayNameEl = document.getElementById('birthdayName');
    const photoDateEl = document.getElementById('photoDate');
    const showCardBtn = document.getElementById('showCardBtn');
    const footerTextEl = document.getElementById('footerText');

    const popupCard = document.getElementById('popupCard');
    const popupTitle = document.getElementById('popupTitle');
    const popupContent = document.getElementById('popupContent');
    const okBtn = document.getElementById('okBtn');

    const birthdayAudio = document.getElementById('birthdayAudio');

    // Text content
    const birthdayText = "HAPPY BIRTHDAY !!!!";
    const birthdayName = "Audilia Zoenita Rahman";
    const photoDate = "9 JUNI 2025";
    const buttonText = "Button";
    const footerText = "By Azka";
    const popupTitleText = "Surprise Card";
    const popupContentText = "This is the card content that appears when the button is clicked.";
    const okBtnText = "oke!";

    // Initially hide the button
    showCardBtn.classList.remove('visible');

    // Initial typing animations on page load
    async function introTyping() {
      await typeText(birthdayTextEl, birthdayText, 80);
      await typeText(birthdayNameEl, birthdayName, 120);
      fadeUp(birthdayNameEl, 600, 20);
      await typeText(photoDateEl, photoDate, 100);
      // Show and type button only after previous typing finished
      showCardBtn.classList.add('visible');
      await typeText(showCardBtn, buttonText, 100);
      await typeText(footerTextEl, footerText, 80);
    }
    introTyping();

    // Popup typing animation
    async function openPopup() {
      popupCard.classList.add('show');
      popupCard.focus();
      okBtn.classList.remove('visible');
      popupTitle.style.borderRight = "3px solid #ec4899";
      popupContent.style.borderRight = "none";
      okBtn.style.borderRight = "none";
      await typeText(popupTitle, popupTitleText, 120);
      popupTitle.style.borderRight = "none";
      popupContent.textContent = "";
      okBtn.textContent = "";
      // Type popup content first
      await typeText(popupContent, popupContentText, 40);
      // Show pink quotation marks after typing finished
      popupContent.classList.add('quotes-visible');
      // Then show and type button text
      okBtn.classList.add('visible');
      await typeText(okBtn, okBtnText, 80);
      fadeUp(popupCard.querySelector('div'), 500, 30);
      showCardBtn.setAttribute('aria-expanded', 'true');

      // Play music, handle promise for autoplay restrictions
      if (birthdayAudio.paused) {
        birthdayAudio.currentTime = 0;
        birthdayAudio.play().catch(() => {
          // Autoplay might be blocked, ignore error
        });
      }
    }

    function closePopup() {
      const popupContentDiv = popupCard.querySelector('div');
      popupContentDiv.style.transition = 'opacity 300ms ease, transform 300ms ease';
      popupContentDiv.style.opacity = '0';
      popupContentDiv.style.transform = 'translateY(30px)';
      setTimeout(() => {
        popupCard.classList.remove('show');
        popupContentDiv.style.opacity = '';
        popupContentDiv.style.transform = '';
        popupTitle.textContent = '';
        popupContent.textContent = '';
        popupContent.classList.remove('quotes-visible');
        okBtn.textContent = '';
        okBtn.classList.remove('visible');
      }, 300);
      showCardBtn.setAttribute('aria-expanded', 'false');
      showCardBtn.focus();

      // Pause music when popup closes
      if (!birthdayAudio.paused) {
        birthdayAudio.pause();
        birthdayAudio.currentTime = 0;
      }
    }

    // Reset text content initially
    showCardBtn.textContent = "";
    okBtn.textContent = "";
    popupTitle.textContent = "";
    popupContent.textContent = "";
    okBtn.classList.remove('visible');
    popupContent.classList.remove('quotes-visible');

    showCardBtn.addEventListener('click', () => {
      openPopup();
    });

    okBtn.addEventListener('click', () => {
      closePopup();
    });

    // Close popup on clicking outside content or pressing Escape
    popupCard.addEventListener('click', (e) => {
      if (e.target === popupCard) {
        closePopup();
      }
    });
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && popupCard.classList.contains('show')) {
        closePopup();
      }
    });
  </script>
</body>
</html>
